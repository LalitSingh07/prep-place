{%include 'header.html' %}
<section class="slider_section">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <div class="container">
        <div class="row">
          <!-- Score Column -->
          <div class="col-md-6">
            <div class="detail-box">
              <h1>Quiz Results</h1>
              <p><b>Your Score:</b> {{ correct }} / {{ total }} ({{ accuracy }}%)</p>
              <p><b>Total Questions Attempted:</b> {{ total }}</p>
              <p><b>Accuracy:</b> {{ accuracy }}%</p>
              <div class="btn-box mt-3">
                <a href="{{ url_for('quiz') }}" class="btn1">üîÅ Try Again</a>
              </div>
              <p>scroll down to see incorrect question !</p>
            </div>
          </div>

          <!-- Image Column -->
          <div class="col-md-6">
            <div class="img-box">
              <img src="https://paramatrix.com/user/themes/paramatrix-2024/images/success-story/gamified-performance-enhancement.png" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


    <!-- end slider section -->
  </div>
<section class="why_section layout_padding">
  <div class="container">
    <div class="heading_container heading_center">
      <h2>Detailed <span>Results</span></h2>
    </div>

    {% if incorrect_questions or results %}
    <div class="why_container">
      
      <!-- Incorrect Answers -->
      {% for q in incorrect_questions %}
      <div>
        <div>
          <h5 style="color: red;">Incorrect</h5>
          <p><b>Q:</b> {{ q.question }}</p>
          {% if q.options %}
          <ul>
            {% for opt in q.options %}
              <li>{{ opt }}</li>
            {% endfor %}
          </ul>
          {% endif %}
          <p><b>Your Answer:</b> {{ q.your_answer }}</p>
          <p><b>Correct Answer:</b> {{ q.correct_answer }}</p>
          {% if q.explanation %}
          <p><i>{{ q.explanation }}</i></p>
          {% endif %}
        </div>
      </div>
      {% endfor %}

      <!-- Correct Answers -->
      {% for q in results %}
        {% if q.is_correct %}
        <div>
          <div>
            <h5 style="color: green;">‚úÖ Correct</h5>
            <p><b>Q:</b> {{ q.question }}</p>
            {% if q.options %}
            <ul>
              {% for opt in q.options %}
                <li>{{ opt }}</li>
              {% endfor %}
            </ul>
            {% endif %}
            <p><b>Your Answer:</b> {{ q.user_answer }}</p>
            <p><b>Correct Answer:</b> {{ q.correct_answer }}</p>
            {% if q.explanation %}
            <p><i>{{ q.explanation }}</i></p>
            {% endif %}
          </div>
        </div>
        {% endif %}
      {% endfor %}

    </div>
    {% else %}
    <p class="text-center mt-4">No questions were attempted.</p>
    {% endif %}
  </div>
</section>



<section class="why_section layout_padding">
  <div class="container">
    <div class="btn-box">
      <a href="{{ url_for('index') }}">
        ‚¨Ö Back to Home
      </a>
    </div>
  </div>
</section>

{% include 'footer.html' %}
{% if questions %}
<script>
  window.onload = function () {
    const quizSection = document.getElementById("quiz_section");
    if (quizSection) {
      quizSection.scrollIntoView({ behavior: "smooth" });
    }
  };
</script>
{% endif %}
  <!-- jQery -->
  <script type="text/javascript" src="static/js/jquery-3.4.1.min.js"></script>
  <!-- popper js -->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <!-- bootstrap js -->
  <script type="text/javascript" src="static/js/bootstrap.js"></script>
  <!-- owl slider -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js">
  </script>
  <!-- custom js -->
  <script type="text/javascript" src="static/js/custom.js"></script>
  <!-- Google Map -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap">
  </script>
  <!-- End Google Map -->

</body>

</html>